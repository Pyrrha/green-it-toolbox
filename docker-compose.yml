version: '3.9'
services:
  # Frontend
  front:
    image: pyrrha/pfa-front:latest
    deploy:
      labels:
        - "traefik.enable=true"
        - "traefik.http.routers.pfa.rule=Host(`$PFA_FRONT_END_URL`)"
        - "traefik.http.routers.pfa.entrypoints=websecure"
        - "traefik.http.routers.pfa.tls.certresolver=letsencrypt"
        - "traefik.http.services.pfa.loadbalancer.server.port=80"

networks:
  srv:
    external: true
